<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>pages/Unsubscribe.jsx - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#Admin">Admin</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#ArenasVerdes">ArenasVerdes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#CardPage">CardPage</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#Clima">Clima</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#Contact">Contact</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#ForgotPassword">ForgotPassword</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#Index">Index</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#Loberia">Loberia</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#PanelAdmin">PanelAdmin</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#PartidoLoberia">PartidoLoberia</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#Register">Register</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#ResetPassword">ResetPassword</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#Routing">Routing</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#SanManuel">SanManuel</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#Searcher">Searcher</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#Suscribe">Suscribe</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#i18n">i18n</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#navigate">navigate</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">pages/Unsubscribe.jsx</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { useState } from "react";
import { useParams } from "react-router-dom";
import { Button } from "react-bootstrap";
import "../styles/unsubscribe.css";
import { Global } from "../helpers/Global";

/**
 * Componente `Unsubscribe`.
 *
 * Permite a un usuario confirmar la desuscripción de una lista de correo
 * mediante un token recibido por URL. Muestra mensajes de estado y
 * controla la interacción durante el proceso.
 *
 * @component
 * @example
 * &lt;Unsubscribe />
 *
 * @returns {JSX.Element} Sección de desuscripción con botón y mensajes de estado.
 */
export default function Unsubscribe() {
  /** Token de desuscripción recibido por la URL */
  const { token } = useParams();

  /** Mensaje que indica el estado actual del proceso */
  const [status, setStatus] = useState("Esperando confirmación...");

  /** Estado que indica si se está procesando la desuscripción */
  const [loading, setLoading] = useState(false);

  /** Estado que indica si la desuscripción fue exitosa */
  const [done, setDone] = useState(false);

  /**
   * Función que realiza la petición al backend para desuscribir al usuario.
   * Actualiza los estados `status`, `loading` y `done` según el resultado.
   */
  const handleUnsubscribe = async () => {
    setLoading(true);
    setStatus("Procesando tu desuscripción...");

    try {
      const res = await fetch(`${Global.url}send/unsubscribe/${token}`);
      const text = await res.text();

      if (res.ok) {
        setStatus(text);
        setDone(true);
      } else {
        setStatus(text || "Error al procesar la desuscripción.");
      }
    } catch (err) {
      console.error(err);
      setStatus("Error al procesar la desuscripción.");
    } finally {
      setLoading(false);
    }
  };

  return (
    &lt;section className="unsubscribe">
      &lt;h2>{status}&lt;/h2>

      {!done &amp;&amp; (
        &lt;Button
          onClick={handleUnsubscribe}
          disabled={loading}
          style={{
            cursor: loading ? "not-allowed" : "pointer",
          }}
        >
          {loading ? "Procesando..." : "Confirmar desuscripción"}
        &lt;/Button>
      )}
    &lt;/section>
  );
}
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> on Wed Sep 10 2025 13:58:13 GMT-0300 (hora estándar de Argentina) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
