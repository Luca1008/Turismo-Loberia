<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>components/layout/ControlledCarousel.jsx - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#AccessibilityButton">AccessibilityButton</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#Admin">Admin</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#AdvancedExample">AdvancedExample</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#ArenasVerdes">ArenasVerdes</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#AuthContext">AuthContext</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#AuthProvider">AuthProvider</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#Banner">Banner</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#ButtonSubmit">ButtonSubmit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#ButtonSuccess">ButtonSuccess</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#CardPage">CardPage</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#Clima">Clima</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#Contact">Contact</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#ContentCard">ContentCard</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#ControlledCarousel">ControlledCarousel</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#Create">Create</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#CreateAdmin">CreateAdmin</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#Edit">Edit</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#Footer">Footer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#ForgotPassword">ForgotPassword</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#Global">Global</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#Header">Header</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#Index">Index</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#ListAdmins">ListAdmins</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#Loberia">Loberia</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#NominatimAutocomplete">NominatimAutocomplete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#PanelAdmin">PanelAdmin</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#PartidoLoberia">PartidoLoberia</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#Register">Register</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#ResetPassword">ResetPassword</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#Routing">Routing</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#SanManuel">SanManuel</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#ScrollToTopButton">ScrollToTopButton</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#Searcher">Searcher</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#Suscribe">Suscribe</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#UpdateAdmin">UpdateAdmin</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#WeatherCardCompact">WeatherCardCompact</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#WeatherCarousel">WeatherCarousel</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#Whatsapp">Whatsapp</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#defaultLocations">defaultLocations</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#diasSemana">diasSemana</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#i18n">i18n</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#iconosOWMtoFa">iconosOWMtoFa</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#navigate">navigate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#obtenerClaseIcono">obtenerClaseIcono</a></span></li><li class="nav-item"><span class="nav-item-type type-member">M</span><span class="nav-item-name"><a href="global.html#useAuth">useAuth</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#useClickOutside">useClickOutside</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">components/layout/ControlledCarousel.jsx</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { useEffect, useState } from "react";
import Carousel from "react-bootstrap/Carousel";
import "../../styles/controlled-carousel.css";
import { Global } from "../../helpers/Global";
import defaultArenas from "../../assets/images/carousel-index/default-arenas.jpg";
import defaultLoberia from "../../assets/images/carousel-index/default-loberia.jpg";
import defaultSanManuel from "../../assets/images/carousel-index/default-sanmanuel.jpg";

const defaultCities = [
  {
    key: "loberia",
    caption: "Lobería",
    defaultImg: defaultLoberia,
    link: "/Loberia",
  },
  {
    key: "arenas_verdes",
    caption: "Arenas Verdes",
    defaultImg: defaultArenas,
    link: "/ArenasVerdes",
  },
  {
    key: "san_manuel",
    caption: "San Manuel",
    defaultImg: defaultSanManuel,
    link: "/SanManuel",
  },
];

/**
 * Componente `ControlledCarousel`
 *
 * Carousel controlado que muestra imágenes de diferentes ciudades con posibilidad
 * de obtener imágenes desde la API y fallback a imágenes por defecto.
 * Incluye autoplay cada 5 segundos y soporte para captions personalizados.
 *
 * @component
 *
 * @param {Object[]} [cities=defaultCities] - Lista de ciudades a mostrar en el carousel.
 * @param {string} cities[].key - Identificador único de la ciudad.
 * @param {string} cities[].caption - Texto a mostrar en el caption.
 * @param {string} cities[].defaultImg - Imagen por defecto si la API no devuelve imagen.
 * @param {string} cities[].link - Link de destino al hacer clic en el caption.
 * @param {Function} [renderCaption=(caption, link) => &lt;h1>&lt;a href={link}>{caption}&lt;/a>&lt;/h1>] 
 *        - Función para renderizar captions personalizados.
 *
 * @example
 * &lt;ControlledCarousel
 *   cities={[
 *     { key: 'loberia', caption: 'Lobería', defaultImg: defaultLoberia, link: '/Loberia' }
 *   ]}
 * />
 *
 * @returns {JSX.Element} Carousel controlado con autoplay y captions interactivos.
 */
export const ControlledCarousel = ({
  cities = defaultCities,
  renderCaption = (caption, link) => (
    &lt;h1>
      &lt;a href={link}>{caption}&lt;/a>
    &lt;/h1>
  ),
}) => {
  const [index, setIndex] = useState(0);
  const [carouselImages, setCarouselImages] = useState([]);

  /**
   * Carga las imágenes de cada ciudad desde la API o usa la imagen por defecto.
   */
  useEffect(() => {
    Promise.all(
      cities.map(async (city) => {
        try {
          const res = await fetch(`${Global.apiUrl}carousel/${city.key}`);
          const data = await res.json();

          return {
            src: data.images?.[0]?.url
              ? `${Global.baseUrl}${data.images[0].url.replace(/^\//, "")}`
              : city.defaultImg,
            caption: city.caption,
            link: city.link,
          };
        } catch (error) {
          console.error(`Error loading image for ${city.key}:`, error);
          return {
            src: city.defaultImg,
            caption: city.caption,
            link: city.link,
          };
        }
      })
    ).then(setCarouselImages);
  }, [cities]);

  /**
   * Actualiza el índice activo al seleccionar un slide.
   * @param {number} selectedIndex - Índice seleccionado
   */
  const handleSelect = (selectedIndex) => {
    setIndex(selectedIndex);
  };

  /**
   * Avanza automáticamente el carousel cada 5 segundos
   */
  useEffect(() => {
    const timer = setInterval(() => {
      setIndex((prevIndex) => (prevIndex + 1) % carouselImages.length);
    }, 5000);

    return () => clearInterval(timer);
  }, [carouselImages]);

  return (
    &lt;Carousel
      className="carousel-index"
      activeIndex={index}
      onSelect={handleSelect}
      interval={null}
      pause={false}
      fade
    >
      {carouselImages.map((img, i) => (
        &lt;Carousel.Item key={i}>
          &lt;img src={img.src} alt={img.caption} />
          &lt;Carousel.Caption>
            {renderCaption(img.caption, img.link)}
          &lt;/Carousel.Caption>
        &lt;/Carousel.Item>
      ))}
    &lt;/Carousel>
  );
};
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> on Wed Sep 10 2025 14:36:16 GMT-0300 (hora estándar de Argentina) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
